/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var Mill_mar_2021 = ee.Image("projects/ee-arearl/assets/Lineislands/Mil_Mar092021"),
    Mill_dec_2021 = ee.Image("projects/ee-arearl/assets/Lineislands/Mill_Dec152021"),
    Mill_mar_2009 = ee.Image("projects/ee-arearl/assets/Lineislands/Mill_Mar212009"),
    viz_islands = {"opacity":1,"bands":["b3","b2","b1"],"min":0,"max":2000,"gamma":1.5530000000000002},
    NDVI_Viz = {"opacity":1,"bands":["NDVI"],"min":-1,"max":1,"palette":["ffffff","ce7e45","df923d","f1b555","fcd163","99b718","74a901","054e0b"]},
    Mill_outline = ee.FeatureCollection("projects/ee-arearl/assets/Lineislands/Millennium_outline"),
    imageVisParam = {"opacity":1,"bands":["b3","b2","b1"],"min":0,"max":4032,"gamma":1.5530000000000002},
    Mill_Shadow_Dec15 = 
    /* color: #d63000 */
    /* shown: false */
    ee.Geometry.MultiPolygon(
        [[[[-150.2074876337425, -9.903998459907013],
           [-150.20758419326702, -9.903927119502232],
           [-150.20775317243496, -9.903826714461823],
           [-150.20787655404965, -9.903792365361998],
           [-150.20811527065197, -9.903776511930099],
           [-150.2081581859962, -9.90391390831447],
           [-150.20823865226666, -9.903900697126158],
           [-150.20830838970105, -9.904040735695123],
           [-150.20847736886898, -9.904096222658746],
           [-150.20859538606564, -9.904207196557861],
           [-150.20875900081555, -9.90435516169827],
           [-150.20883678487698, -9.904418575309466],
           [-150.20890384010235, -9.904526906866892],
           [-150.20897089532772, -9.904648449547285],
           [-150.2088233738319, -9.904743569874443],
           [-150.20877777627865, -9.904759423259625],
           [-150.20867317012707, -9.904833405713676],
           [-150.2085712461845, -9.904854543554636],
           [-150.20845859340588, -9.90485718578466],
           [-150.20834862283627, -9.904917957069307],
           [-150.20829497865597, -9.90481226787137],
           [-150.20819573692242, -9.904709220870606],
           [-150.20814209274212, -9.904653734010633],
           [-150.20808844856182, -9.904553329192545],
           [-150.20801871112744, -9.904492557840356],
           [-150.20793556264798, -9.904492557840356],
           [-150.2078685074226, -9.904537475797415],
           [-150.20768162577028, -9.904607956102083],
           [-150.20776477424974, -9.904692507515803],
           [-150.2079015669095, -9.904819334595539],
           [-150.20800349085206, -9.904925023791202],
           [-150.2080651816594, -9.90503863963857],
           [-150.20811077921266, -9.905228880039106],
           [-150.20799544422502, -9.90523944894701],
           [-150.20802226631517, -9.905382129170434],
           [-150.20794448225374, -9.905390055847688],
           [-150.20778891413087, -9.9053583491375],
           [-150.20769235460634, -9.90535042245947],
           [-150.2075957950818, -9.905368918041232],
           [-150.2074885067212, -9.905466680384658],
           [-150.20735707847948, -9.905503671534031],
           [-150.20731684534425, -9.905442900357857],
           [-150.20726051895494, -9.905279082348622],
           [-150.2073597606885, -9.905231522266103],
           [-150.20741072265977, -9.905146970991284],
           [-150.20747252712366, -9.905052276747032],
           [-150.2073169590008, -9.905004716631638],
           [-150.2072096706402, -9.905157965867657],
           [-150.20705946693536, -9.905142112501737],
           [-150.20711311111566, -9.905031138918819],
           [-150.20721503505823, -9.90496244096772],
           [-150.20717748413202, -9.904877889623565],
           [-150.20715066204187, -9.904766915951274],
           [-150.2071184755337, -9.904587244211832],
           [-150.20713456878778, -9.90447627044125],
           [-150.20712652216073, -9.904367938867107],
           [-150.2072096706402, -9.90424375384786],
           [-150.20727404365655, -9.904143348904345],
           [-150.20739742527124, -9.904082577476219]]],
         [[[-150.20631697381216, -9.913506074155906],
           [-150.20627942288596, -9.913691025327338],
           [-150.2060004731484, -9.913939388164827],
           [-150.205925371296, -9.914087348914746],
           [-150.2060326596566, -9.914314574222091],
           [-150.2059790154763, -9.914383270214223],
           [-150.2057805320092, -9.91466333834089],
           [-150.20557131970602, -9.914732034259945],
           [-150.20546939576346, -9.914605211013528],
           [-150.20545330250937, -9.914346280066392],
           [-150.20550158227164, -9.914177182194612],
           [-150.20557131970602, -9.913992231297458],
           [-150.20566251481253, -9.91390768228115],
           [-150.20580735409933, -9.913632897827565],
           [-150.20602193082053, -9.913537780078423],
           [-150.20620968545157, -9.913490221193511]]],
         [[[-150.20676143754298, -9.935128981623016],
           [-150.20676143754298, -9.935298068675644],
           [-150.2068365393954, -9.935509427368519],
           [-150.20714767564112, -9.93560453873575],
           [-150.2071798621493, -9.935810613269886],
           [-150.20702965844447, -9.936143502627683],
           [-150.2067828952151, -9.936661329844126],
           [-150.20647175896937, -9.936444687945164],
           [-150.20625181783015, -9.93631258915585],
           [-150.2060962497073, -9.936185774267905],
           [-150.20592458833033, -9.935990267886023],
           [-150.2057582913714, -9.935784193465064],
           [-150.20565100301081, -9.935424883907764],
           [-150.20582266438777, -9.93518182133636],
           [-150.206584411748, -9.935081425873722]]],
         [[[-150.21171779254732, -9.953074882064664],
           [-150.21179825881777, -9.953360200746848],
           [-150.21173925021944, -9.95379874564257],
           [-150.21186799625215, -9.954321828543009],
           [-150.2118787250882, -9.9546494153872],
           [-150.21130473235903, -9.954887179826299],
           [-150.21082729915437, -9.95485547791109],
           [-150.2106717310315, -9.954580727850331],
           [-150.21060735801515, -9.954258424599708],
           [-150.21055371383486, -9.953835731329724],
           [-150.21058590034303, -9.953629668162177],
           [-150.21044106105623, -9.953164704639647],
           [-150.2107253752118, -9.953201690398643],
           [-150.21119744399843, -9.953249243511182],
           [-150.2112457237607, -9.953022045244314],
           [-150.21154076675234, -9.952831832620225]]],
         [[[-150.213528109079, -9.958733664174211],
           [-150.2132062439972, -9.959024261495282],
           [-150.21279854822694, -9.959003127153391],
           [-150.21263761568605, -9.958871037485514],
           [-150.21263761568605, -9.958765365712715],
           [-150.21284146357118, -9.958480051755231],
           [-150.21301848936616, -9.958168319553547],
           [-150.2133671765381, -9.957676944461515]]]]),
    Mill_cloud_Dec15 = 
    /* color: #98ff00 */
    /* shown: false */
    ee.Geometry.MultiPolygon(
        [[[[-150.21341354890905, -9.910293419059677],
           [-150.21377832933507, -9.911603940808694],
           [-150.21412165208898, -9.914161556877554],
           [-150.2123621229752, -9.914499752550023],
           [-150.2104523901566, -9.914647713047012],
           [-150.21002323671422, -9.913696537258206],
           [-150.21070988222203, -9.912698679588903],
           [-150.211246324025, -9.912064558933123],
           [-150.21019489809117, -9.911620673744379],
           [-150.21004469438634, -9.911092238212387],
           [-150.21043093248448, -9.91054266435575],
           [-150.21109612032018, -9.91094427611081],
           [-150.2118042235001, -9.910796313942488],
           [-150.2127054457291, -9.910479251928422]]],
         [[[-150.2037154499598, -9.911842493904965],
           [-150.20374763646797, -9.912080289455666],
           [-150.20386565366462, -9.912265241431408],
           [-150.20397294202522, -9.912476614990235],
           [-150.20397294202522, -9.912872940045723],
           [-150.20387638250068, -9.913153009462704],
           [-150.20378518739417, -9.913364382449169],
           [-150.20387638250068, -9.913665588719407],
           [-150.20358670392707, -9.91364973576472],
           [-150.2034096781321, -9.913533480740224],
           [-150.20329702535346, -9.91335381380309],
           [-150.20318973699287, -9.91316357811526],
           [-150.2030717197962, -9.913068460229953],
           [-150.20301271119789, -9.912968057987745],
           [-150.2031039063044, -9.91284123405891],
           [-150.20307708421424, -9.912698557080324],
           [-150.20289469400123, -9.912587586054064],
           [-150.20261574426368, -9.912318084833892],
           [-150.20279277005866, -9.912228251044615],
           [-150.20279277005866, -9.912053867736315],
           [-150.20281422773078, -9.911842493904965],
           [-150.20289469400123, -9.911631119937361],
           [-150.20301807561592, -9.91148844243219],
           [-150.20318973699287, -9.9114567363115],
           [-150.20341504255012, -9.911504295491392],
           [-150.2036832634516, -9.911594129479019]]],
         [[[-150.20540524163917, -9.911641688638975],
           [-150.20557690301612, -9.911884768682143],
           [-150.2057163778849, -9.912080289455666],
           [-150.20585585275367, -9.912323369173667],
           [-150.20582903066352, -9.912518889685646],
           [-150.20561981836036, -9.912714410081014],
           [-150.2053945128031, -9.912719694414417],
           [-150.20516384282783, -9.912714410081014],
           [-150.20500291028694, -9.912756684745768],
           [-150.20493317285255, -9.91286237138379],
           [-150.20486343541816, -9.91311073484907],
           [-150.20485807100013, -9.913242842998605],
           [-150.20496535936073, -9.913475353212513],
           [-150.20484734216407, -9.913628598490599],
           [-150.20474005380348, -9.913776559380794],
           [-150.20452011266426, -9.913781843697071],
           [-150.20435918012336, -9.91372900053051],
           [-150.20432699361518, -9.913581039618865],
           [-150.204294807107, -9.913295686243522],
           [-150.20432162919715, -9.913094881867526],
           [-150.2043109003611, -9.912867655714814],
           [-150.20440745988563, -9.912709125747549],
           [-150.2043323580332, -9.912513605349012],
           [-150.20444501081184, -9.912503036675504],
           [-150.2046166721888, -9.912592870389501],
           [-150.2048151556559, -9.912487183664597],
           [-150.20492780843452, -9.912207113678845],
           [-150.20492780843452, -9.912027446014864],
           [-150.20471323171333, -9.91196403387465],
           [-150.20466495195106, -9.911784366077468],
           [-150.20500298584102, -9.91160221641221],
           [-150.20514782512782, -9.911565225950598],
           [-150.20522829139827, -9.911623353816964]]],
         [[[-150.20172763934625, -9.91102348532797],
           [-150.2018993007232, -9.911034054049175],
           [-150.20203877559197, -9.911071044570695],
           [-150.20219970813287, -9.911229575329958],
           [-150.20219970813287, -9.911393390367344],
           [-150.2020602332641, -9.911514930503486],
           [-150.20180274119866, -9.911483224385366],
           [-150.20177055469048, -9.911699882798136],
           [-150.2016096221496, -9.911937678452256],
           [-150.20148087611688, -9.912106777479151],
           [-150.20133067241204, -9.912175473933912],
           [-150.20117510428918, -9.912291729439957],
           [-150.20103026500237, -9.912392131889282],
           [-150.20106245151055, -9.912217748668153],
           [-150.20111609569085, -9.911905972375012],
           [-150.2010195361663, -9.911842560211312],
           [-150.20096589198602, -9.911779148035334],
           [-150.20096589198602, -9.911684029748402],
           [-150.2010195361663, -9.911536067913874],
           [-150.201142917781, -9.911504361797789],
           [-150.20129848590386, -9.911504361797789],
           [-150.20141650310052, -9.911467371325147],
           [-150.20155061355126, -9.911409243431137],
           [-150.20169008842004, -9.911240144044521]]],
         [[[-150.21198392759953, -9.956409483601828],
           [-150.21210730921422, -9.956546857891471],
           [-150.21189809691106, -9.956800471812754],
           [-150.21170497786198, -9.957001249360681],
           [-150.2117961729685, -9.957196743170236],
           [-150.21183908831273, -9.95739752047438],
           [-150.21186054598485, -9.957666984556857],
           [-150.21203757177983, -9.957619432087899],
           [-150.21214486014043, -9.957651133734643],
           [-150.21211803805028, -9.95773567144427],
           [-150.21182835947667, -9.957804358317217],
           [-150.21121145140324, -9.957751522262388],
           [-150.2108949507395, -9.957640566519405],
           [-150.21083057772313, -9.957355251578507],
           [-150.21088422190343, -9.956958980413486],
           [-150.21090567957555, -9.956578559642397],
           [-150.21094859491978, -9.956377781834453],
           [-150.2111846293131, -9.9562826765139],
           [-150.2112919176737, -9.956103033055024],
           [-150.21150112997685, -9.95626682562445],
           [-150.21162451159154, -9.956319661919627],
           [-150.2116727913538, -9.956504588885421],
           [-150.21182835947667, -9.956356647321167]]],
         [[[-150.20767261575702, -9.95404789518475],
           [-150.20838071893695, -9.955062357453974],
           [-150.209110279789, -9.955210299604849],
           [-150.20964672159198, -9.956795389870589],
           [-150.20919611047748, -9.957239213765552],
           [-150.20835926126483, -9.956436103418339],
           [-150.20752241205219, -9.95601341296817],
           [-150.2068572242165, -9.955611856533507],
           [-150.20644952844623, -9.954851011407861],
           [-150.2063207824135, -9.953921087179436],
           [-150.207307835331, -9.95381541380407]]],
         [[[-150.21808249579212, -9.973320819763455],
           [-150.218243428333, -9.973220436028704],
           [-150.21833462343952, -9.973220436028704],
           [-150.21853310690662, -9.973326103117055],
           [-150.21853847132465, -9.973553287240975],
           [-150.21850092039844, -9.973801604590566],
           [-150.21827025042316, -9.97388085476869],
           [-150.21812541113636, -9.973812171282107],
           [-150.21799666510364, -9.973938971553723],
           [-150.21791083441516, -9.973849154699757],
           [-150.2177713595464, -9.97392312152246],
           [-150.2175943337514, -9.97390727149045],
           [-150.21742267237445, -9.973965388270761],
           [-150.2174119435384, -9.974134455209116],
           [-150.2173743926122, -9.974472588822643],
           [-150.21729392634174, -9.97448843882716],
           [-150.2172885619237, -9.97436692210611],
           [-150.21722418890735, -9.974261255355318],
           [-150.2172134600713, -9.974197855288388],
           [-150.2171437226369, -9.974076338458955],
           [-150.2171222649648, -9.97392312152246],
           [-150.2172134600713, -9.97389142145765],
           [-150.2174334012105, -9.973817454627742],
           [-150.217519231899, -9.973764621167508],
           [-150.2176640711858, -9.973669520917538],
           [-150.2177928172185, -9.973542720541051],
           [-150.21788401232502, -9.97342648681925],
           [-150.21792692766925, -9.973341953177348]]],
         [[[-150.20064892188512, -9.931803215221517],
           [-150.20074011699162, -9.931787363144714],
           [-150.20085276977025, -9.931708102749159],
           [-150.20092250720464, -9.931750374962517],
           [-150.20092250720464, -9.931898327666257],
           [-150.20076157466374, -9.932088552472761],
           [-150.20071329490148, -9.932215368948997],
           [-150.20070793048345, -9.932336901359266],
           [-150.20079912558995, -9.93244786569444],
           [-150.20090104953252, -9.932315765291161],
           [-150.2009493292948, -9.932136108657115],
           [-150.20106734649144, -9.932188948853842],
           [-150.20116390601598, -9.93232633332538],
           [-150.20109953299962, -9.932527125910804],
           [-150.2010405244013, -9.932944562733496],
           [-150.20111026183568, -9.933044958851903],
           [-150.2011317195078, -9.9332457509963],
           [-150.20101370231114, -9.93331444301742],
           [-150.20083131209813, -9.933166490954026],
           [-150.20072402373754, -9.933007970811863],
           [-150.2005577267786, -9.932912858689695],
           [-150.20027341262303, -9.933013254817833],
           [-150.2000534714838, -9.933018538823728],
           [-150.1998335303446, -9.933023822829535],
           [-150.1996565045496, -9.933198194973235],
           [-150.19949020759069, -9.933441259018506],
           [-150.19905032531224, -9.93344654301748],
           [-150.1988625706812, -9.933435975019432],
           [-150.19863190070592, -9.933293307012454],
           [-150.19853534118138, -9.93310308290637],
           [-150.19836367980443, -9.93310308290637],
           [-150.19816519633733, -9.933198194973235],
           [-150.19796671287023, -9.93327217100614],
           [-150.19787551776372, -9.933282739009469],
           [-150.1977628649851, -9.933377851024108],
           [-150.197564381518, -9.933420123021735],
           [-150.19743563548528, -9.93341483902233],
           [-150.19735516921483, -9.933277455007849],
           [-150.1973122538706, -9.933161206950523],
           [-150.19722642318212, -9.933076662882893],
           [-150.19708694831334, -9.933124218923627],
           [-150.19703330413304, -9.933261603002457],
           [-150.19690455810033, -9.933377851024108],
           [-150.19704939738713, -9.933420123021735],
           [-150.19681336299382, -9.933462395013905],
           [-150.19667925254308, -9.933483531007942],
           [-150.19631447211705, -9.933367283023845],
           [-150.19633592978917, -9.933192910970254],
           [-150.19637348071538, -9.932992118793416],
           [-150.19636811629735, -9.932791326493364],
           [-150.19649686233006, -9.932622238145106],
           [-150.1967382611414, -9.93244786569444],
           [-150.19695820228063, -9.93237388947517],
           [-150.19728543178044, -9.932384457507517],
           [-150.19752683059178, -9.932336901359266],
           [-150.19774140731298, -9.932268209132925],
           [-150.1980149926325, -9.932252357078639],
           [-150.1983046712061, -9.93237917349138],
           [-150.19873382464849, -9.932368605458867],
           [-150.19891480419233, -9.932320400226528],
           [-150.1991776606758, -9.93224113996008],
           [-150.19928494903638, -9.93219886781013],
           [-150.19938150856092, -9.932072051327491],
           [-150.19949952575757, -9.931976938933271],
           [-150.19972483131482, -9.931913530655091],
           [-150.19992867919996, -9.93181841821478],
           [-150.20008961174085, -9.93171273769314],
           [-150.20030418846204, -9.93171273769314]]],
         [[[-150.20081216827282, -9.934024374433651],
           [-150.20095700755962, -9.934161758134477],
           [-150.20097846523174, -9.934330845687063],
           [-150.2009516431416, -9.9346056127736],
           [-150.20091409221538, -9.934695440424925],
           [-150.20065123573193, -9.934695440424925],
           [-150.20059759155163, -9.934975491179506],
           [-150.20058686271557, -9.935202701992898],
           [-150.20069415107616, -9.93535065313538],
           [-150.20089263454327, -9.9354140607474],
           [-150.20106429592022, -9.935266109633595],
           [-150.2011501266087, -9.935060034756415],
           [-150.20126277938732, -9.934954355281864],
           [-150.20137006774792, -9.934970207205227],
           [-150.2015470935429, -9.935170998167944],
           [-150.20148808494457, -9.9354140607474],
           [-150.2013325168217, -9.935683542961302],
           [-150.2013325168217, -9.935884333486147],
           [-150.20098382964977, -9.93589490140509],
           [-150.20054394737133, -9.935910753282853],
           [-150.20006114974865, -9.935910753282853],
           [-150.19986266628155, -9.935704678811833],
           [-150.19984657302746, -9.935435196615334],
           [-150.19976074233898, -9.935197418022282],
           [-150.19960517421612, -9.934927935407897],
           [-150.19964272514233, -9.934706008382276],
           [-150.19980365768322, -9.934600328793353],
           [-150.20004505649456, -9.934658452571483],
           [-150.20016843810924, -9.93451578509763],
           [-150.20024353996166, -9.93444180934595],
           [-150.20038301483044, -9.934241017935625],
           [-150.20056540504345, -9.934156474147056],
           [-150.20073170200237, -9.934087782302736]]]]),
    Mill_clear_dec15 = 
    /* color: #0b4a8b */
    /* shown: false */
    ee.Geometry.MultiPolygon(
        [[[[-150.20902175478702, -9.97610774039807],
           [-150.20913440756564, -9.975986224281058],
           [-150.20956356100803, -9.975986224281058],
           [-150.2097566800571, -9.976260956307094],
           [-150.20981568865542, -9.976720603601708],
           [-150.2098639684177, -9.977069301116664],
           [-150.21028775744205, -9.977444414693222],
           [-150.21073132487783, -9.977805010161504],
           [-150.21093517276296, -9.977947658715063],
           [-150.21072059604177, -9.978518252304466],
           [-150.2103665444518, -9.979115261193488],
           [-150.20983010264882, -9.979395273835175],
           [-150.20891278716573, -9.979353007791483],
           [-150.20837098094472, -9.979210359853525],
           [-150.20815640422353, -9.978740149541471],
           [-150.20770579310903, -9.97828578837021],
           [-150.20765751334676, -9.977963508550491],
           [-150.20765214892873, -9.977260831772282],
           [-150.20793109866628, -9.976891001280084],
           [-150.20821004840383, -9.976642686285402],
           [-150.20852654906759, -9.976500037160296],
           [-150.20873576137075, -9.976399654405183],
           [-150.20887523623952, -9.976304554924422],
           [-150.20893960925588, -9.97618303888083]]],
         [[[-150.21016944959132, -9.973815737315944],
           [-150.20947207524745, -9.974967504625495],
           [-150.20875324323146, -9.975992468440001],
           [-150.20705808713404, -9.97653136564682],
           [-150.20540584638087, -9.975865668967657],
           [-150.2055560500857, -9.974048204440347],
           [-150.20682205274073, -9.972737933026567],
           [-150.20815242841212, -9.972494898233416]]],
         [[[-150.20484799095178, -9.964373994424218],
           [-150.20459049888635, -9.966466253180306],
           [-150.20044916816735, -9.96773428225615],
           [-150.19742363639855, -9.968241492505578],
           [-150.19660824485803, -9.966804394749392],
           [-150.19720905967736, -9.963338427043457],
           [-150.1981531972506, -9.961943575986776],
           [-150.1996123189547, -9.960823464002141],
           [-150.20137184806848, -9.960802329776786],
           [-150.20338886924768, -9.96149975849063],
           [-150.20407974432797, -9.962600476758498]]],
         [[[-150.2054443465243, -9.907108948143563],
           [-150.20657087431056, -9.906834157993158],
           [-150.20761157140834, -9.907182930067798],
           [-150.2090277777682, -9.90783819781131],
           [-150.21029378042323, -9.908123555935632],
           [-150.20957494840724, -9.909539774064395],
           [-150.20903850660426, -9.910818592642828],
           [-150.20843769178492, -9.91175920808357],
           [-150.20802999601466, -9.9118543263487],
           [-150.2073004351626, -9.91098769224684],
           [-150.20502592191798, -9.910533236863339],
           [-150.20271922216517, -9.910184468351202],
           [-150.20109916792018, -9.909877974504033],
           [-150.20075584516627, -9.90923327961474],
           [-150.2011742697726, -9.90868370264294],
           [-150.20198966131312, -9.908250381688973],
           [-150.20256901846034, -9.907626821262864],
           [-150.20327712164027, -9.907415444578227],
           [-150.20399595365626, -9.907098379295872]]],
         [[[-150.20517130995316, -9.923093303211347],
           [-150.20579894686264, -9.92322540733632],
           [-150.20636266313113, -9.924161984135266],
           [-150.20624763657403, -9.926028590874834],
           [-150.20579702545953, -9.92674194612204],
           [-150.2052713124926, -9.92692688982129],
           [-150.20394630123926, -9.926821207720225],
           [-150.2031952827151, -9.926572854648427],
           [-150.2026910274203, -9.926276944359495],
           [-150.20239598442865, -9.92482853875688],
           [-150.20326502014947, -9.923761141128061],
           [-150.20393020798517, -9.923179883530427]]]]),
    Mill_Shadow_mar09 = 
    /* color: #ffc82d */
    /* shown: false */
    ee.Geometry.MultiPolygon(
        [[[[-150.2050628613828, -9.91118297661673],
           [-150.20510577672704, -9.911272810692383],
           [-150.20514332765325, -9.911489469244207],
           [-150.2053310822843, -9.911595156290693],
           [-150.20550274366124, -9.911552881476188],
           [-150.20561539643987, -9.911552881476188],
           [-150.20564758294805, -9.911700843303132],
           [-150.20566904062017, -9.911938638956538],
           [-150.20550274366124, -9.912144728383343],
           [-150.20546519273503, -9.912308542963519],
           [-150.20530426019414, -9.9123032586235],
           [-150.20505749696477, -9.912387808053573],
           [-150.20503067487462, -9.91245122011183],
           [-150.20492338651403, -9.91257275985586],
           [-150.20481609815343, -9.912604465868629],
           [-150.20487510675176, -9.912831692203776],
           [-150.2046283435224, -9.912932094487738],
           [-150.20431184285863, -9.912942663147419],
           [-150.2040007066129, -9.912847545198016],
           [-150.2038558673261, -9.912652024882037],
           [-150.20399534219487, -9.91252520083095],
           [-150.2041240882276, -9.912271552581599],
           [-150.20417236798986, -9.912049610202448],
           [-150.2039846133588, -9.911906932879395],
           [-150.20395242685063, -9.911700843303132],
           [-150.20392024034246, -9.911589871939185],
           [-150.20419382566197, -9.91149475359733],
           [-150.204376215875, -9.911505322303345],
           [-150.20449423307164, -9.91138378216364],
           [-150.20462297910436, -9.911315085543006],
           [-150.20476245397313, -9.911320369898952]]],
         [[[-150.20122493681876, -9.91667384808345],
           [-150.20131613192527, -9.916858797467434],
           [-150.20135368285148, -9.917318528341173],
           [-150.20132686076133, -9.91757745694017],
           [-150.2012142079827, -9.91777825856996],
           [-150.20111764845817, -9.917857522337323],
           [-150.20096744475333, -9.91811645051043],
           [-150.20079578337638, -9.918296114836826],
           [-150.20055974898307, -9.918285546349761],
           [-150.20021642622916, -9.918195714195978],
           [-150.2001145022866, -9.918021334062441],
           [-150.20007158694236, -9.917651436502293],
           [-150.20013595995871, -9.917381939445558],
           [-150.20030762133567, -9.917286822784382],
           [-150.20048464713065, -9.917038462483374],
           [-150.200549020147, -9.916890503065648],
           [-150.20066703734366, -9.916689700891881],
           [-150.20091380057303, -9.916547025588393]]],
         [[[-150.20645353436768, -9.916923851742318],
           [-150.20659300923646, -9.917119369510242],
           [-150.2064374411136, -9.917367729749929],
           [-150.20632478833497, -9.917589668528258],
           [-150.2061155760318, -9.91771649061983],
           [-150.20582053304017, -9.917864449664616],
           [-150.20574006676972, -9.918054682624039],
           [-150.20564350724518, -9.918229062739826],
           [-150.2054503881961, -9.918392874279213],
           [-150.2051231586963, -9.918445716693803],
           [-150.20487639546693, -9.91856725421502],
           [-150.2048012936145, -9.918461569416527],
           [-150.2050319635898, -9.918266052449429],
           [-150.20516607404053, -9.918165651799368],
           [-150.20504269242585, -9.918028261386274],
           [-150.2049997770816, -9.917832744160647],
           [-150.20511779427827, -9.917779901647206],
           [-150.20533237099946, -9.917779901647206],
           [-150.20550861557226, -9.917728085188795],
           [-150.20564809044103, -9.917511430760344],
           [-150.2056266327689, -9.917284207669297],
           [-150.2054228744803, -9.917149211857108],
           [-150.20537995913605, -9.916863861588123],
           [-150.20542823889832, -9.916541521170569],
           [-150.20561599352936, -9.91640941435048],
           [-150.20577156165223, -9.916435835718763],
           [-150.20602368929963, -9.91646754135788],
           [-150.20620607951264, -9.916562658256845],
           [-150.2063080034552, -9.916657775128204]]],
         [[[-150.2168826665282, -9.962600915897987],
           [-150.21664663213488, -9.963013030773237],
           [-150.21644278424975, -9.963319474830096],
           [-150.21668954747912, -9.963657619662149],
           [-150.21623893636462, -9.963499114315773],
           [-150.21557374852893, -9.963488547289943],
           [-150.21558447736498, -9.963182103391937],
           [-150.21569176572558, -9.96298132964748],
           [-150.21554156202075, -9.962748854631066],
           [-150.21564885038134, -9.962452977097827],
           [-150.21607800382372, -9.96231560529473],
           [-150.2165608014464, -9.962463544157204]]],
         [[[-150.22631562259363, -9.980766704168067],
           [-150.22647655513452, -9.980978033414095],
           [-150.2264014532821, -9.98131615992244],
           [-150.2262941649215, -9.981696551824548],
           [-150.225843553807, -9.981633153205063],
           [-150.2254465868728, -9.981411257939635],
           [-150.22496378925013, -9.98140069149465],
           [-150.22485650088953, -9.980914634654692],
           [-150.2250496199386, -9.980777270633611],
           [-150.22495306041407, -9.980639906554591],
           [-150.22455609347986, -9.980544808312086],
           [-150.22472775485681, -9.980375744701277],
           [-150.22496378925013, -9.980460276517656],
           [-150.22543585803675, -9.98061877361422],
           [-150.2259293844955, -9.980576507729337],
           [-150.22598302867578, -9.98034404526446],
           [-150.22626197841333, -9.980291212862943]]],
         [[[-150.22204554584192, -9.976085726204568],
           [-150.22205627467798, -9.976349891537803],
           [-150.22192752864527, -9.976645756456682],
           [-150.22190607097315, -9.977068420160306],
           [-150.2214661886947, -9.977100119915956],
           [-150.2212837984817, -9.976624623257093],
           [-150.22155201938318, -9.976233658817572],
           [-150.22179878261255, -9.975906093655603],
           [-150.22209919002222, -9.975747594265426]]]]),
    Mill_Cloud_mar09 = 
    /* color: #00ffff */
    /* shown: false */
    ee.Geometry({
      "type": "GeometryCollection",
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -150.2050160561483,
                -9.915615116365208
              ],
              [
                -150.20516625985314,
                -9.915900467721459
              ],
              [
                -150.20532719239404,
                -9.916058996145354
              ],
              [
                -150.20514480218102,
                -9.916291504361709
              ],
              [
                -150.20508042916467,
                -9.916545149500505
              ],
              [
                -150.20503751382043,
                -9.916841068580998
              ],
              [
                -150.20479075059106,
                -9.91701016507845
              ],
              [
                -150.20464054688622,
                -9.91750688553514
              ],
              [
                -150.20429722413232,
                -9.917654844674567
              ],
              [
                -150.20375005349328,
                -9.91767598168904
              ],
              [
                -150.2032672558706,
                -9.917517454047319
              ],
              [
                -150.20314923867394,
                -9.916587423671215
              ],
              [
                -150.2030312214773,
                -9.916397189860053
              ],
              [
                -150.20329944237878,
                -9.915889899157133
              ],
              [
                -150.20383588418176,
                -9.915731370651445
              ],
              [
                -150.20425430878808,
                -9.91548829346047
              ],
              [
                -150.20464054688622,
                -9.91548829346047
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -150.2026020680349,
                -9.91474849220481
              ],
              [
                -150.20245186433007,
                -9.915150098807928
              ],
              [
                -150.20239822014977,
                -9.915636253511227
              ],
              [
                -150.20274154290368,
                -9.91571023351157
              ],
              [
                -150.20298830613305,
                -9.915995584785
              ],
              [
                -150.20256988152673,
                -9.916333778565141
              ],
              [
                -150.20221582993676,
                -9.916143544606745
              ],
              [
                -150.20218364342858,
                -9.915837056330417
              ],
              [
                -150.20167938813378,
                -9.915657390655888
              ],
              [
                -150.20121804818322,
                -9.9155305677675
              ],
              [
                -150.20084253892114,
                -9.91540374483004
              ],
              [
                -150.20070306405236,
                -9.915097255861944
              ],
              [
                -150.20041338547875,
                -9.915012707130652
              ],
              [
                -150.19996277436425,
                -9.915002138537712
              ],
              [
                -150.1996087227743,
                -9.914801335207013
              ],
              [
                -150.1995765362661,
                -9.914579394540501
              ],
              [
                -150.2000056897085,
                -9.91452655150251
              ],
              [
                -150.20049921616723,
                -9.91469564919408
              ],
              [
                -150.20062796219995,
                -9.914547688718745
              ],
              [
                -150.20086399659326,
                -9.914336316495243
              ],
              [
                -150.20110003098657,
                -9.914124944135448
              ],
              [
                -150.20152918442895,
                -9.914114375513883
              ],
              [
                -150.20178667649438,
                -9.91414608137756
              ],
              [
                -150.20177594765832,
                -9.91446313984569
              ],
              [
                -150.20217291459252,
                -9.9147167863994
              ],
              [
                -150.20253769501855,
                -9.91456882593358
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -150.19949070557763,
                -9.915435450569014
              ],
              [
                -150.19965163811852,
                -9.91584762489645
              ],
              [
                -150.19940487488915,
                -9.916481738234207
              ],
              [
                -150.19932977303674,
                -9.916946753902135
              ],
              [
                -150.19919029816796,
                -9.917411768910224
              ],
              [
                -150.1987826023977,
                -9.91769711870214
              ],
              [
                -150.19839636429955,
                -9.917771098237255
              ],
              [
                -150.19814960107018,
                -9.918088153198594
              ],
              [
                -150.19760243043115,
                -9.918067016210712
              ],
              [
                -150.19760243043115,
                -9.91778166674091
              ],
              [
                -150.19780627831628,
                -9.917528022559143
              ],
              [
                -150.19781700715234,
                -9.917105281819927
              ],
              [
                -150.1978813801687,
                -9.91652401241311
              ],
              [
                -150.19812814339807,
                -9.916006153345904
              ],
              [
                -150.19841782197167,
                -9.91581591919735
              ],
              [
                -150.19914738282372,
                -9.91547772488286
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -150.20363421394688,
                -9.91050121020379
              ],
              [
                -150.20359129860265,
                -9.910987371800802
              ],
              [
                -150.2028617377506,
                -9.911568651025064
              ],
              [
                -150.20221800758702,
                -9.911399551720647
              ],
              [
                -150.20193905784947,
                -9.911071921570189
              ],
              [
                -150.2021965499149,
                -9.91049064146541
              ],
              [
                -150.2026471610294,
                -9.910173579155794
              ],
              [
                -150.20322651817662,
                -9.910173579155794
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -150.2080341123169,
                -9.91756856146329
              ],
              [
                -150.20811994300539,
                -9.918096986555033
              ],
              [
                -150.2085383676117,
                -9.918488020574316
              ],
              [
                -150.2088065885132,
                -9.918931896463118
              ],
              [
                -150.20849545226747,
                -9.919492024702702
              ],
              [
                -150.20847399459535,
                -9.92008385727389
              ],
              [
                -150.2079268239563,
                -9.920168404696776
              ],
              [
                -150.20746548400575,
                -9.919988741397052
              ],
              [
                -150.2073474668091,
                -9.919682256717183
              ],
              [
                -150.2074762128418,
                -9.9191961080162
              ],
              [
                -150.2074547551697,
                -9.918836780251851
              ],
              [
                -150.2074225686615,
                -9.91846688361222
              ],
              [
                -150.2074011109894,
                -9.918107555048179
              ],
              [
                -150.2070256017273,
                -9.917906753620164
              ],
              [
                -150.20661790595705,
                -9.91774822609008
              ],
              [
                -150.2068432115143,
                -9.917304348597872
              ],
              [
                -150.20710832615364,
                -9.917304348597872
              ],
              [
                -150.20739800472725,
                -9.917388896737974
              ],
              [
                -150.20782715816964,
                -9.917515718907252
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -150.2030484608806,
                -9.918641182888205
              ],
              [
                -150.2028124264873,
                -9.918820846926888
              ],
              [
                -150.20222234050402,
                -9.918672888313958
              ],
              [
                -150.2019326619304,
                -9.918366402403189
              ],
              [
                -150.20231890002856,
                -9.918313559975813
              ],
              [
                -150.2028761834594,
                -9.91828185451529
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -150.2135131842546,
                -9.959840296718445
              ],
              [
                -150.21321277684493,
                -9.960220713687104
              ],
              [
                -150.21254758900923,
                -9.960347519244763
              ],
              [
                -150.21147470540328,
                -9.960136176621285
              ],
              [
                -150.21074514455123,
                -9.959713490963653
              ],
              [
                -150.2112815863542,
                -9.959227401780428
              ],
              [
                -150.2117107397966,
                -9.95935420772412
              ],
              [
                -150.21231155461592,
                -9.95935420772412
              ],
              [
                -150.21314840382857,
                -9.959417610677493
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -150.21512250966353,
                -9.96135450408147
              ],
              [
                -150.21484355992598,
                -9.96194626087229
              ],
              [
                -150.2141998297624,
                -9.962291864956926
              ],
              [
                -150.21344881123824,
                -9.961932584556877
              ],
              [
                -150.21377067632002,
                -9.961467632863517
              ],
              [
                -150.21450023717208,
                -9.961277425161617
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -150.21442443047047,
                -9.963932170886412
              ],
              [
                -150.21454244766713,
                -9.964270315083231
              ],
              [
                -150.21467119369984,
                -9.964449954045188
              ],
              [
                -150.2143922439623,
                -9.964682427849073
              ],
              [
                -150.21413475189686,
                -9.964386552069913
              ],
              [
                -150.21415620956898,
                -9.963995572950019
              ],
              [
                -150.21447807465077,
                -9.96384763478243
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -150.22047466831185,
                -9.975212272939887
              ],
              [
                -150.22058195667245,
                -9.976332335484656
              ],
              [
                -150.22033519344308,
                -9.977348595285653
              ],
              [
                -150.21994895534493,
                -9.978215053417955
              ],
              [
                -150.21901554660775,
                -9.978362985063816
              ],
              [
                -150.2184683759687,
                -9.977993155823178
              ],
              [
                -150.2184147317884,
                -9.977338028708843
              ],
              [
                -150.21800703601815,
                -9.976925931945617
              ],
              [
                -150.21773881511666,
                -9.97639760199925
              ],
              [
                -150.21802849369027,
                -9.97607003700215
              ],
              [
                -150.21830744342782,
                -9.975520572396345
              ],
              [
                -150.21847910480477,
                -9.975076773384286
              ],
              [
                -150.21883315639474,
                -9.974685807087026
              ],
              [
                -150.21944470005013,
                -9.975055640082907
              ],
              [
                -150.22010988788583,
                -9.97501337347605
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -150.22283404284585,
                -10.001936538899773
              ],
              [
                -150.22297888213265,
                -10.002253512083863
              ],
              [
                -150.22300033980477,
                -10.002581050715843
              ],
              [
                -150.22297351771462,
                -10.00294028625506
              ],
              [
                -150.2225926440345,
                -10.003035377948944
              ],
              [
                -150.2222868722068,
                -10.003035377948944
              ],
              [
                -150.22224395686257,
                -10.002691991145358
              ],
              [
                -150.2221581261741,
                -10.002343321096463
              ],
              [
                -150.22224395686257,
                -10.002068611097398
              ],
              [
                -150.2224102538215,
                -10.001915407343171
              ],
              [
                -150.22269456797707,
                -10.001788617974698
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -150.22419124060738,
                -10.002533504805887
              ],
              [
                -150.22409468108285,
                -10.002707839775038
              ],
              [
                -150.2237781804191,
                -10.002776517161445
              ],
              [
                -150.22384255343545,
                -10.00261274798528
              ],
              [
                -150.22391229086983,
                -10.002306340917801
              ],
              [
                -150.22412686759102,
                -10.002348603978783
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -150.2036940649032,
                -9.917690377752171
              ],
              [
                -150.20381208209986,
                -9.917785494296226
              ],
              [
                -150.20386572628016,
                -9.917986295798526
              ],
              [
                -150.20363505630488,
                -9.91804442252624
              ],
              [
                -150.20348485260004,
                -9.91804442252624
              ],
              [
                -150.20334001331324,
                -9.918007432791613
              ],
              [
                -150.2032273605346,
                -9.918049706773703
              ],
              [
                -150.2031522586822,
                -9.918171244441798
              ],
              [
                -150.2032595470428,
                -9.918372045707732
              ],
              [
                -150.20327027587885,
                -9.918498867496488
              ],
              [
                -150.20322199611658,
                -9.91860983652139
              ],
              [
                -150.20303960590357,
                -9.918551709893993
              ],
              [
                -150.20295913963312,
                -9.918340340252872
              ],
              [
                -150.20287867336268,
                -9.918192381422951
              ],
              [
                -150.20241196899408,
                -9.91829278206483
              ],
              [
                -150.20224030761713,
                -9.9182293711367
              ],
              [
                -150.2024495199203,
                -9.918118401982948
              ],
              [
                -150.2025407150268,
                -9.918018001287647
              ],
              [
                -150.20271237640375,
                -9.918018001287647
              ],
              [
                -150.20266946105951,
                -9.917917600561585
              ],
              [
                -150.2027391984939,
                -9.917759073036756
              ],
              [
                -150.20299669055933,
                -9.91772208326993
              ],
              [
                -150.2030449703216,
                -9.917531850117422
              ],
              [
                -150.20298596172327,
                -9.917394459438599
              ],
              [
                -150.2028464868545,
                -9.917225363139437
              ],
              [
                -150.20289476661677,
                -9.917103825120515
              ],
              [
                -150.20300205497736,
                -9.916934728671382
              ],
              [
                -150.2030610635757,
                -9.916702220911374
              ],
              [
                -150.20314689426417,
                -9.916961149997313
              ],
              [
                -150.20316298751825,
                -9.917177804789569
              ],
              [
                -150.2032273605346,
                -9.91742088072747
              ],
              [
                -150.20326491146082,
                -9.917589976925731
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -150.20213838367457,
                -9.91860983652139
              ],
              [
                -150.20231004505152,
                -9.91876836363463
              ],
              [
                -150.20229395179743,
                -9.91903257531959
              ],
              [
                -150.20216520576471,
                -9.919212239143649
              ],
              [
                -150.20217057018274,
                -9.9193919028692
              ],
              [
                -150.20197745113367,
                -9.9193443448338
              ],
              [
                -150.20197208671564,
                -9.919111838783516
              ],
              [
                -150.2019828155517,
                -9.918921606437852
              ],
              [
                -150.20200427322382,
                -9.91876836363463
              ],
              [
                -150.20205791740412,
                -9.91865211042576
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -150.20361792863065,
                -9.914592338621924
              ],
              [
                -150.20385396302396,
                -9.914761436279552
              ],
              [
                -150.20393979371244,
                -9.914962239634677
              ],
              [
                -150.20394515813047,
                -9.915337424521207
              ],
              [
                -150.20380031884366,
                -9.915665050408906
              ],
              [
                -150.20356964886838,
                -9.91574959897192
              ],
              [
                -150.2032853347128,
                -9.915855284645028
              ],
              [
                -150.20305466473752,
                -9.915886990340315
              ],
              [
                -150.20275425732785,
                -9.915680903266141
              ],
              [
                -150.2025289517706,
                -9.915606923259185
              ],
              [
                -150.2024753075903,
                -9.915347993103358
              ],
              [
                -150.20255577386075,
                -9.914983376822809
              ],
              [
                -150.20265769780332,
                -9.91474029907712
              ],
              [
                -150.20265769780332,
                -9.91444966240545
              ],
              [
                -150.2027435284918,
                -9.914291133203196
              ],
              [
                -150.20289909661466,
                -9.914280564586988
              ],
              [
                -150.20332825005704,
                -9.914402103652822
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -150.202893765985,
                -9.913017645780792
              ],
              [
                -150.20270601135397,
                -9.914217186166416
              ],
              [
                -150.2018852553954,
                -9.914127352897506
              ],
              [
                -150.20088210922384,
                -9.913974107852567
              ],
              [
                -150.20072117668295,
                -9.913297715074151
              ],
              [
                -150.2011449657073,
                -9.912082318293814
              ],
              [
                -150.2017189584365,
                -9.912029474853343
              ],
              [
                -150.20282402855062,
                -9.912203858174596
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -150.2044827967608,
                -9.910842833089053
              ],
              [
                -150.20451498326898,
                -9.911033070123375
              ],
              [
                -150.20457935628534,
                -9.911120262060539
              ],
              [
                -150.20455789861322,
                -9.911212738332225
              ],
              [
                -150.2044291525805,
                -9.9113237098238
              ],
              [
                -150.204340639683,
                -9.911392406442626
              ],
              [
                -150.20424139794946,
                -9.91134220506874
              ],
              [
                -150.2041046052897,
                -9.911395048619983
              ],
              [
                -150.2040160923922,
                -9.911450534339615
              ],
              [
                -150.20387661752343,
                -9.911400332974631
              ],
              [
                -150.2038363843882,
                -9.911413543860904
              ],
              [
                -150.20382029113412,
                -9.911500735696912
              ],
              [
                -150.2037425070727,
                -9.911508662226309
              ],
              [
                -150.2036888628924,
                -9.911447892162702
              ],
              [
                -150.2036539941752,
                -9.911527157460817
              ],
              [
                -150.20367545184732,
                -9.911616991442184
              ],
              [
                -150.2036727696383,
                -9.91173324714625
              ],
              [
                -150.20357889232278,
                -9.911870640197908
              ],
              [
                -150.2035118370974,
                -9.911952547566688
              ],
              [
                -150.20352256593347,
                -9.912082014011101
              ],
              [
                -150.20371300277353,
                -9.912121646585911
              ],
              [
                -150.203798833462,
                -9.911886493238622
              ],
              [
                -150.20383906659723,
                -9.911801943679267
              ],
              [
                -150.2039061218226,
                -9.911931410183156
              ],
              [
                -150.20402682122827,
                -9.91201331753676
              ],
              [
                -150.20405632552743,
                -9.912071445323686
              ],
              [
                -150.20402950343728,
                -9.912235259940477
              ],
              [
                -150.2038873463595,
                -9.912438707011903
              ],
              [
                -150.20371836719156,
                -9.912536467248085
              ],
              [
                -150.2034206419909,
                -9.912515329902185
              ],
              [
                -150.2029512554133,
                -9.912488908217895
              ],
              [
                -150.2028788357699,
                -9.912409643152282
              ],
              [
                -150.20286542472482,
                -9.912100509213282
              ],
              [
                -150.2028439670527,
                -9.911809870201386
              ],
              [
                -150.20299417075753,
                -9.911500735696912
              ],
              [
                -150.20342600640893,
                -9.911204811795663
              ],
              [
                -150.20366740522027,
                -9.910932667257894
              ],
              [
                -150.2037639647448,
                -9.910599752273503
              ],
              [
                -150.2039248972857,
                -9.910575972618815
              ],
              [
                -150.20416897830606,
                -9.910665806860774
              ],
              [
                -150.20427894887567,
                -9.910721292703796
              ],
              [
                -150.2043942838633,
                -9.91076885199035
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        }
      ],
      "coordinates": []
    }),
    Mill_clear_mar09 = 
    /* color: #bf04c2 */
    /* shown: false */
    ee.Geometry({
      "type": "GeometryCollection",
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -150.23582329693562,
                -9.995454400022462
              ],
              [
                -150.23689618054158,
                -9.996363073781104
              ],
              [
                -150.2374755376888,
                -9.99811701827114
              ],
              [
                -150.2368103498531,
                -9.999363792333778
              ],
              [
                -150.23496499005086,
                -9.999680768027746
              ],
              [
                -150.23376336041218,
                -10.001561484118477
              ],
              [
                -150.23271193447835,
                -10.002491272321588
              ],
              [
                -150.2317677969051,
                -10.003632372388259
              ],
              [
                -150.23071637097127,
                -10.004731205700764
              ],
              [
                -150.22972931805378,
                -10.005534196924286
              ],
              [
                -150.22923579159504,
                -10.007541666296344
              ],
              [
                -150.2286135191036,
                -10.009253288274113
              ],
              [
                -150.2296220296932,
                -10.015372639018086
              ],
              [
                -150.22563090267903,
                -10.016682738618544
              ],
              [
                -150.22060980740315,
                -10.014020272591074
              ],
              [
                -150.21902193966633,
                -10.008864323886277
              ],
              [
                -150.221124791534,
                -10.00645536896324
              ],
              [
                -150.2242576116634,
                -10.00501843997348
              ],
              [
                -150.2264892095638,
                -10.002736245570047
              ],
              [
                -150.2277337545467,
                -10.000327245194441
              ],
              [
                -150.22947373760067,
                -9.999342009332912
              ],
              [
                -150.22975268733822,
                -9.997672598797427
              ],
              [
                -150.22977414501034,
                -9.99530582486192
              ],
              [
                -150.23065390956722,
                -9.994354884053129
              ],
              [
                -150.23292842281185,
                -9.994460544280349
              ],
              [
                -150.23464503658138,
                -9.994291487900318
              ],
              [
                -150.23528876674496,
                -9.994439412237655
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -150.22327247035824,
                -9.992019784267365
              ],
              [
                -150.2233368433746,
                -9.994132997464202
              ],
              [
                -150.22082629573666,
                -9.997492978165555
              ],
              [
                -150.2165991343292,
                -9.999458233797723
              ],
              [
                -150.21383109462582,
                -9.996816758425904
              ],
              [
                -150.21498980892025,
                -9.994534506418963
              ],
              [
                -150.21715703380428,
                -9.99218884182849
              ],
              [
                -150.21977486980282,
                -9.99054052685892
              ],
              [
                -150.22215667140804,
                -9.990139012972863
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -150.213988880779,
                -9.978287028416219
              ],
              [
                -150.21531925645039,
                -9.979998804401152
              ],
              [
                -150.21654234376118,
                -9.982450221003496
              ],
              [
                -150.2156625792043,
                -9.984690292446365
              ],
              [
                -150.21244392838642,
                -9.985028415098515
              ],
              [
                -150.2072511717336,
                -9.984986149786224
              ],
              [
                -150.20574913468525,
                -9.982534752281241
              ],
              [
                -150.21183238473103,
                -9.9806539261625
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -150.21256215820978,
                -9.973775291352288
              ],
              [
                -150.2123475814886,
                -9.97762154473622
              ],
              [
                -150.20582444916437,
                -9.981679081488316
              ],
              [
                -150.19998796234796,
                -9.977875142264413
              ],
              [
                -150.20591027985284,
                -9.971704213029582
              ],
              [
                -150.21256215820978,
                -9.973479423826436
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -150.2045335156914,
                -9.94148866840481
              ],
              [
                -150.20427602362597,
                -9.946561143277735
              ],
              [
                -150.20137923788988,
                -9.949985019300557
              ],
              [
                -150.19122975897753,
                -9.949477780672819
              ],
              [
                -150.19184851461836,
                -9.944972188120467
              ],
              [
                -150.19221329504438,
                -9.936877286862583
              ],
              [
                -150.20395064169355,
                -9.936856151087825
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -150.20804849859763,
                -9.909521280771894
              ],
              [
                -150.20787416221606,
                -9.90986212055532
              ],
              [
                -150.2076032602963,
                -9.910097272616406
              ],
              [
                -150.2073296721377,
                -9.910683842695276
              ],
              [
                -150.20701853033592,
                -9.911022042647335
              ],
              [
                -150.20691123402713,
                -9.911011466239595
              ],
              [
                -150.20677712094076,
                -9.910948052119217
              ],
              [
                -150.20628895726733,
                -9.9109480536705
              ],
              [
                -150.2040788292556,
                -9.908749759670227
              ],
              [
                -150.2006026863723,
                -9.907544914867842
              ],
              [
                -150.20135370489646,
                -9.90538886575588
              ],
              [
                -150.20568815466453,
                -9.902788905336495
              ],
              [
                -150.20989385839988,
                -9.903211664530662
              ],
              [
                -150.2110525726943,
                -9.905705932690392
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -150.21301708001388,
                -9.95109142254527
              ],
              [
                -150.2134676911284,
                -9.954029154149076
              ],
              [
                -150.21321019906296,
                -9.956163748300803
              ],
              [
                -150.21172961968674,
                -9.956840052446815
              ],
              [
                -150.21061382073654,
                -9.957199338454386
              ],
              [
                -150.21087131280197,
                -9.955424039036577
              ],
              [
                -150.2105709053923,
                -9.95394461547948
              ],
              [
                -150.20997009057297,
                -9.951873411236972
              ],
              [
                -150.20898303765549,
                -9.9506687251755
              ],
              [
                -150.2114506699492,
                -9.949781058918227
              ],
              [
                -150.21275958794845,
                -9.950203757436865
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        }
      ],
      "coordinates": []
    }),
    Mill_cloud_mar21 = 
    /* color: #ff0000 */
    /* shown: false */
    ee.Geometry({
      "type": "GeometryCollection",
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -150.22608711556137,
                -10.009061568391639
              ],
              [
                -150.22592618302048,
                -10.0097483281651
              ],
              [
                -150.2255506737584,
                -10.009706066067139
              ],
              [
                -150.22535755470932,
                -10.009484189962631
              ],
              [
                -150.22535755470932,
                -10.009209486004062
              ],
              [
                -150.22500350311935,
                -10.0091883549207
              ],
              [
                -150.225121520316,
                -10.008955912912922
              ],
              [
                -150.2253360970372,
                -10.008818560739192
              ],
              [
                -150.22546484306991,
                -10.008607249589197
              ],
              [
                -150.22574379280746,
                -10.008628380710393
              ],
              [
                -150.22595836952866,
                -10.008829126293072
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -150.22604956463516,
                -10.008258585891042
              ],
              [
                -150.2258779032582,
                -10.008258585891042
              ],
              [
                -150.22575452164352,
                -10.008195192451142
              ],
              [
                -150.22599592045486,
                -10.00816349572656
              ],
              [
                -150.22608711556137,
                -10.008152930150999
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -150.21025649073965,
                -9.972421559028268
              ],
              [
                -150.2102672195757,
                -9.972622326959064
              ],
              [
                -150.2103906011904,
                -9.972934045343338
              ],
              [
                -150.21036377910025,
                -9.973192929876474
              ],
              [
                -150.2102296686495,
                -9.97300272901503
              ],
              [
                -150.21004191401846,
                -9.972749127693731
              ],
              [
                -150.20989171031363,
                -9.972669877240348
              ],
              [
                -150.20973614219076,
                -9.972548359841051
              ],
              [
                -150.20982197287924,
                -9.97240042555467
              ],
              [
                -150.20998826983816,
                -9.972379292079708
              ],
              [
                -150.2100150919283,
                -9.9722841914254
              ],
              [
                -150.21014383796103,
                -9.972189090743331
              ],
              [
                -150.21027258399374,
                -9.972173240626946
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -150.19759751432775,
                -9.964348781935966
              ],
              [
                -150.1972112762296,
                -9.964665791725798
              ],
              [
                -150.1968143092954,
                -9.964760894602652
              ],
              [
                -150.19638515585302,
                -9.965003935161944
              ],
              [
                -150.19603110426306,
                -9.965003935161944
              ],
              [
                -150.19571996801733,
                -9.965151872805006
              ],
              [
                -150.19534445875524,
                -9.96499336818488
              ],
              [
                -150.19568778150915,
                -9.964982801207457
              ],
              [
                -150.19598818891882,
                -9.964792595555437
              ],
              [
                -150.19639588468908,
                -9.964591822802387
              ],
              [
                -150.1966533767545,
                -9.964475585888872
              ],
              [
                -150.19678212278723,
                -9.964074039868857
              ],
              [
                -150.19714690321325,
                -9.964169142918275
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -150.20020462149023,
                -9.96422725823889
              ],
              [
                -150.1997861968839,
                -9.964369912735597
              ],
              [
                -150.19956089132666,
                -9.964406897224562
              ],
              [
                -150.19935704344152,
                -9.964443881709325
              ],
              [
                -150.19916392439245,
                -9.964512567169916
              ],
              [
                -150.19913173788427,
                -9.964311794244479
              ],
              [
                -150.19931949251531,
                -9.964200840732655
              ],
              [
                -150.1995501624906,
                -9.964089887183084
              ],
              [
                -150.19979692571997,
                -9.964195557231147
              ],
              [
                -150.20016707056402,
                -9.96419027372956
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -150.2009180890882,
                -9.965847637450148
              ],
              [
                -150.20092881792425,
                -9.966011425127206
              ],
              [
                -150.20069278353094,
                -9.96616464578289
              ],
              [
                -150.2005586730802,
                -9.966217480475041
              ],
              [
                -150.20032263868688,
                -9.966132944963483
              ],
              [
                -150.20028508776068,
                -9.966000858182786
              ],
              [
                -150.20042992704748,
                -9.965842353975317
              ],
              [
                -150.20056403749822,
                -9.965715550553869
              ],
              [
                -150.200703512367,
                -9.96567328273577
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -150.2001456128919,
                -9.966006141655035
              ],
              [
                -150.20033873194097,
                -9.966280882094336
              ],
              [
                -150.20024217241644,
                -9.966412968761603
              ],
              [
                -150.1999471294248,
                -9.966613740393342
              ],
              [
                -150.1996950017774,
                -9.966587323080446
              ],
              [
                -150.19977010362982,
                -9.966434102623381
              ],
              [
                -150.1998773919904,
                -9.966238614349518
              ],
              [
                -150.20015634172796,
                -9.96604312595843
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -150.2087123516089,
                -9.976608897545255
              ],
              [
                -150.20877940683428,
                -9.976685505390915
              ],
              [
                -150.2088706019408,
                -9.976714563534545
              ],
              [
                -150.20890278844897,
                -9.976804379598487
              ],
              [
                -150.20890278844897,
                -9.976910045524345
              ],
              [
                -150.20896984367434,
                -9.977018353062784
              ],
              [
                -150.20905567436282,
                -9.977081752580775
              ],
              [
                -150.20899130134646,
                -9.977219118160734
              ],
              [
                -150.20882500438753,
                -9.977274592705434
              ],
              [
                -150.20877136020724,
                -9.977134585502986
              ],
              [
                -150.20874990253512,
                -9.97698665329917
              ],
              [
                -150.2086748006827,
                -9.976939103647952
              ],
              [
                -150.20863188533846,
                -9.976865137510046
              ],
              [
                -150.2085299613959,
                -9.976817587841095
              ],
              [
                -150.20844681291643,
                -9.97675154662269
              ],
              [
                -150.20846827058855,
                -9.976624747445845
              ],
              [
                -150.20855678348605,
                -9.9765481395859
              ],
              [
                -150.20869625835482,
                -9.9765613478389
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                -150.2083677725936,
                -9.9751756512026
              ],
              [
                -150.20839459468374,
                -9.97540283403678
              ],
              [
                -150.20827657748708,
                -9.975587750180203
              ],
              [
                -150.2081371026183,
                -9.975476800506737
              ],
              [
                -150.2079171614791,
                -9.975323584228898
              ],
              [
                -150.20757383872518,
                -9.975165084555295
              ],
              [
                -150.2076113896514,
                -9.974853368305567
              ],
              [
                -150.20779914428243,
                -9.974964318191356
              ],
              [
                -150.20809418727407,
                -9.975096401339451
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        }
      ],
      "coordinates": []
    }),
    Mill_clear_mar21 = 
    /* color: #00ff00 */
    /* shown: false */
    ee.Geometry.MultiPolygon(
        [[[[-150.21482372325912, -9.909774061561764],
           [-150.21409416240706, -9.920976757487136],
           [-150.20589733165755, -9.921695407927388],
           [-150.19302272838607, -9.92110357826763],
           [-150.19512558025374, -9.9151852228712],
           [-150.20104789775863, -9.903601846697201],
           [-150.210660934868, -9.900431143237178],
           [-150.21422290843978, -9.903179088005638]]],
         [[[-150.2338451054192, -9.99139848428307],
           [-150.22772966886524, -9.993596229921188],
           [-150.225884309063, -9.991609806624458],
           [-150.22322355772022, -9.988017308148484],
           [-150.22418915296558, -9.986242176610022],
           [-150.227686753521, -9.982311493744035],
           [-150.2318495419121, -9.983114540338507]]]]);
/***** End of imports. If edited, may not auto-convert in the playground. *****/
// Millenium Island shared

// Millenium Island has one cloud and very few shadows however due to consistancy I will run it through a Cloud 
//mask as well

//Create collection of images to view them all at once
//uploaded from imagery dropbox
var islandscol = ee.ImageCollection([Mill_mar_2009,Mill_mar_2021, Mill_dec_2021] )
print(islandscol)

///////////////////////////////////////////////////////////////////////////////////////////////
//add all images in layer function

function addImage(image) { // display each image in collection
  var id = image.id
  var image = ee.Image(image.id)
  Map.addLayer(image, viz_islands, id)
};



islandscol.evaluate(function(islandscol){
  islandscol.features.map(addImage)
});

//There are some inconsistancies with the visualizations.
//The image from March 092021 has some widely different DN values
//If you change the visualization to 1, 2, 3 it looks  better
// and values are in the thousands rather than 100s, max 8949 compared to 2057
//////////////////////////////////////
//clip to only the outline so that the classification is even more accurate
var Mill_mar_2009 = Mill_mar_2009.clip(Mill_outline)
var Mill_mar_2021 = Mill_mar_2021.clip(Mill_outline)
var Mill_dec_2021 = Mill_dec_2021.clip(Mill_outline)


//////////////////////////////////////////////////////////////////////////////////////////////////

//create points using the geometery imports finding cloud and shadow
//for this project we do not need to focus strictly on differentiating clouds and shadows as the groups
// will eventually be merged
//points were collected visually from areas of interest, generally over land masses
//make each geometry into a feature collection
//add a property "Class" and a values 1, 2, 
  //0 = clear
  //1 = clouds
  //2 = shadow
  
//Each image will go through its own classifier due to some differences in band values
//mainly the image from Ikonos.
//These differences however will not effect NDVI calculations

///////////////////////////////////////////////////////////////////////////////////////////
//Classifier
//Dec 15

////Clouds  
// Generate random points within the sample area.  
var cloud_2021_points_dec15= ee.FeatureCollection.randomPoints(Mill_cloud_Dec15, 500)
    .map(function(f) {
        return f.set('class', 1)
    }) 


Map.addLayer(cloud_2021_points_dec15, {}, "cloud_2021_points_dec15", false );


////Shadows  
// Generate random points within the sample area.  
var shadow_2021_points_dec15= ee.FeatureCollection.randomPoints(Mill_Shadow_Dec15, 500)
    .map(function(f) {
        return f.set('class', 1)
    }) 


Map.addLayer(shadow_2021_points_dec15, {}, "shadow_2021_points_dec15", false );

//Clear from _dec15
var clear_2021_points_dec15= ee.FeatureCollection.randomPoints(Mill_clear_dec15, 1000)
    .map(function(f) {
        return f.set('class', 0)
    }) 


///merge the points together

///merge the points together

var mill_lc_dec15 = (cloud_2021_points_dec15 ).merge(clear_2021_points_dec15 ).merge(shadow_2021_points_dec15 )

var pixels_mil_dec15  = Mill_dec_2021.sampleRegions(mill_lc_dec15, ["class"], 2);

print(pixels_mil_dec15)


////merge all the trainingpixels and add a random column

var trainingdata_dec15 = pixels_mil_dec15

var trainingdata_dec15 = trainingdata_dec15.randomColumn("random");

//split the data into the final training and testing set
var trainingdata_input_dec15 = trainingdata_dec15.filter(ee.Filter.lt("random",0.7));

var validationdata_dec15= trainingdata_dec15.filter(ee.Filter.gt("random",0.7));

//identify the bands you will be using in the classifier)
var bands = ["b1","b2","b3","b4"];

// //create the classifier
var classifier_dec15 = ee.Classifier.smileRandomForest(500)
    .train({
      features:trainingdata_input_dec15,
      classProperty: 'class',
      inputProperties: bands,
    });    

// // // ////////////////////////////////////////////////////////////////////////////////////
// //Accuracy metrics on the training data
// // Get information about the trained classifier.
// print('Results of trained classifier', classifier_dec15.explain());

// // Get a confusion matrix and overall accuracy for the training sample.
// var trainAccuracy = classifier_dec15.confusionMatrix();
// print('Training error matrix dec15', trainAccuracy);
// print('Training overall accuracy dec15', trainAccuracy.accuracy());

// // // // //////////////////////////////////////////////////////////////////////////////////////
// // //Accuracy on the testing data
// // Get a confusion matrix and overall accuracy for the validation sample.
// var validationSample_dec15 = validationdata_dec15.classify(classifier_dec15);
// var validationAccuracy_dec15 = validationSample_dec15.errorMatrix('class','classification');
// print('Validation error matrix dec15', validationAccuracy_dec15);
// print('Validation accuracy dec15', validationAccuracy_dec15.accuracy());

// // // // ///////////////////////////////////////////////////////////////////////////////
// // //other accuracy metrics
// var CAtest_validation = validationAccuracy_dec15 .consumersAccuracy();
// var Kappatest_validation = validationAccuracy_dec15 .kappa(); 
// var PAtest_validation = validationAccuracy_dec15 .producersAccuracy();

// print(CAtest_validation,'Consumers Accuracy validation dec 15');
// print(Kappatest_validation,'Kappa test validation dec 15');
// print( PAtest_validation ,'Producers Accuracy test validation dec 15');

/////////////////////////////////////////////////////////////////////
//classify the images
var classed_mil_dec15 = Mill_dec_2021.classify(classifier_dec15)



var class_visparams = {bands: ["classification"],
  min:0, max:1,
palette: ['green', 'white']};

print(classed_mil_dec15)

Map.addLayer(classed_mil_dec15.clip(Mill_outline), class_visparams, "classed_dec15")


//Add classification bands to original images

var class_mil_dec15 = classed_mil_dec15.select('classification')
var mill_classed_img_dec15 = Mill_dec_2021.addBands(class_mil_dec15)
print(mill_classed_img_dec15)

//creat mask in classification band
var mask_dec15 = class_mil_dec15.eq(0); // 
var final_mask_dec15 = mill_classed_img_dec15.updateMask(mask_dec15); 

Map.addLayer(final_mask_dec15.clip(Mill_outline), viz_islands, "final_dec_15_2021")

// when you export
// use "final_mask_dec_15"

// Compute the Normalized Difference Vegetation Index (NDVI).
var nir_dec15 = final_mask_dec15.select('b4');
var red_dec15 = final_mask_dec15.select('b3');
var ndvi_dec15 = nir_dec15.subtract(red_dec15).divide(nir_dec15.add(red_dec15)).rename('NDVI');

//Add bands

var final_mask_NDVI_dec15 = final_mask_dec15. addBands(ndvi_dec15)


print(final_mask_NDVI_dec15, "final_mask_dec15")


var ndviVis = {
  min: -1.0,
  max: 1.0,
  palette: [
    'FFFFFF', 'CE7E45', 'DF923D', 'F1B555', 'FCD163', '99B718', '74A901',
    '66A000', '529400', '3E8601', '207401', '056201', '004C00', '023B01',
    '012E01', '011D01', '011301'
  ],
};

Map.addLayer(final_mask_NDVI_dec15.select('NDVI').clip(Mill_outline), NDVI_Viz, "NDVI dec15")



// ///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////
//Classifier
//Mar 09 2021

////Clouds  
// Generate random points within the sample area.  
var cloud_2021_points_mar09= ee.FeatureCollection.randomPoints(Mill_Cloud_mar09, 500)
    .map(function(f) {
        return f.set('class', 1)
    }) 


Map.addLayer(cloud_2021_points_mar09, {}, "cloud_2021_points_mar09", false );


////Shadows  
// Generate random points within the sample area.  
var shadow_2021_points_mar09= ee.FeatureCollection.randomPoints(Mill_Shadow_mar09, 500)
    .map(function(f) {
        return f.set('class', 1)
    }) 


Map.addLayer(shadow_2021_points_mar09, {}, "shadow_2021_points_mar09", false );

//Clear from _mar09
var clear_2021_points_mar09= ee.FeatureCollection.randomPoints(Mill_clear_mar09, 1000)
    .map(function(f) {
        return f.set('class', 0)
    }) 


///merge the points together
var mill_lc_mar09 = (cloud_2021_points_mar09 ).merge(clear_2021_points_mar09 ).merge(shadow_2021_points_mar09 )

var pixels_mil_mar09  = Mill_mar_2021.sampleRegions(mill_lc_mar09, ["class"], 2);

print(pixels_mil_mar09)


////merge all the trainingpixels and add a random column

var trainingdata_mar09 = pixels_mil_mar09

var trainingdata_mar09 = trainingdata_mar09.randomColumn("random");

//split the data into the final training and testing set
var trainingdata_input_mar09 = trainingdata_mar09.filter(ee.Filter.lt("random",0.7));

var validationdata_mar09= trainingdata_mar09.filter(ee.Filter.gt("random",0.7));

//identify the bands you will be using in the classifier)
var bands = ["b1","b2","b3","b4"];

// //create the classifier
var classifier_mar09 = ee.Classifier.smileRandomForest(500)
    .train({
      features:trainingdata_input_mar09,
      classProperty: 'class',
      inputProperties: bands,
    });    


// // // ////////////////////////////////////////////////////////////////////////////////////
// //Accuracy metrics on the training data
// // Get information about the trained classifier.
// print('Results of trained classifier', classifier_mar09.explain());

// // // Get a confusion matrix and overall accuracy for the training sample.
// var trainAccuracy = classifier_mar09.confusionMatrix();
// print('Training error matrix mar09', trainAccuracy);
// print('Training overall accuracy mar09', trainAccuracy.accuracy());

// // // // //////////////////////////////////////////////////////////////////////////////////////
// // //Accuracy on the testing data
// // Get a confusion matrix and overall accuracy for the validation sample.
// var validationSample_mar09 = validationdata_mar09.classify(classifier_mar09);
// var validationAccuracy_mar09 = validationSample_mar09.errorMatrix('class','classification');
// print('Validation error matrix mar09', validationAccuracy_mar09);
// print('Validation accuracy mar09', validationAccuracy_mar09.accuracy());

// // // // // ///////////////////////////////////////////////////////////////////////////////
// // // //other accuracy metrics
// var CAtest_validation = validationAccuracy_mar09 .consumersAccuracy();
// var Kappatest_validation = validationAccuracy_mar09 .kappa(); 
// var PAtest_validation = validationAccuracy_mar09 .producersAccuracy();

// print(CAtest_validation,'Consumers Accuracy validation');
// print(Kappatest_validation,'Kappa test validation');
// print( PAtest_validation ,'Producers Accuracy test validation');

// // /////////////////////////////////////////////////////////////////////
//classify the images
var classed_mil_mar09 = Mill_mar_2021.classify(classifier_mar09)


var class_visparams = {bands: ["classification"],
  min:0, max:1,
palette: ['green', 'white']};

print(classed_mil_mar09)

Map.addLayer(classed_mil_mar09.clip(Mill_outline), class_visparams, "classed_mar09")


//Add classification bands to original images

var class_mil_mar09 = classed_mil_mar09.select('classification')
var mill_classed_img_mar09 = Mill_mar_2021.addBands(class_mil_mar09)
print(mill_classed_img_mar09)

//creat mask in classification band
var mask_mar09 = class_mil_mar09.eq(0); // 
var final_mask_mar09 = mill_classed_img_mar09.updateMask(mask_mar09); 

Map.addLayer(final_mask_mar09.clip(Mill_outline), viz_islands, "final_mar09_2021")

// //when you export
// //use "final_mask_mar09"
//Add and calculate the NDVI of the image as a band

// Compute the Normalized Difference Vegetation Index (NDVI).
var nir_mar09 = final_mask_mar09.select('b4');
var red_mar09 = final_mask_mar09.select('b3');
var ndvi_mar09 = nir_mar09.subtract(red_mar09).divide(nir_mar09.add(red_mar09)).rename('NDVI');

//Add bands

var final_mask_NDVI_mar09 = final_mask_mar09. addBands(ndvi_mar09)


print(final_mask_NDVI_mar09, "final_mask_mar09")


var ndviVis = {
  min: -1.0,
  max: 1.0,
  palette: [
    'FFFFFF', 'CE7E45', 'DF923D', 'F1B555', 'FCD163', '99B718', '74A901',
    '66A000', '529400', '3E8601', '207401', '056201', '004C00', '023B01',
    '012E01', '011D01', '011301'
  ],
};

Map.addLayer(final_mask_NDVI_mar09.select('NDVI').clip(Mill_outline), NDVI_Viz, "NDVI mar09")
// ///////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////
//Classifier
//Mar 21 2009

////Clouds  
// Generate random points within the sample area.  
var cloud_2009_points_mar21= ee.FeatureCollection.randomPoints(Mill_cloud_mar21, 300)
    .map(function(f) {
        return f.set('class', 1)
    }) 


Map.addLayer(cloud_2009_points_mar21, {}, "cloud_2009_points_mar21", false );


// ////Shadows  
// // Generate random points within the sample area.  
// var shadow_2021_points_mar09= ee.FeatureCollection.randomPoints(Mill_Shadow_mar09, 500)
//     .map(function(f) {
//         return f.set('class', 1)
//     }) 


// Map.addLayer(shadow_2021_points_mar09, {}, "shadow_2021_points_mar09", false );

//Clear from _mar09
var clear_2009_points_mar21= ee.FeatureCollection.randomPoints(Mill_clear_mar21, 1700)
    .map(function(f) {
        return f.set('class', 0)
    }) 


///merge the points together
var mill_lc_mar21 = (cloud_2009_points_mar21 ).merge(clear_2009_points_mar21 )//.merge(shadow_2021_points_mar09 )

var pixels_mil_mar21  = Mill_mar_2009.sampleRegions(mill_lc_mar21, ["class"], 2);

print(pixels_mil_mar21)


////merge all the trainingpixels and add a random column

var trainingdata_mar21 = pixels_mil_mar21

var trainingdata_mar21 = trainingdata_mar21.randomColumn("random");

//split the data into the final training and testing set
var trainingdata_input_mar21 = trainingdata_mar21.filter(ee.Filter.lt("random",0.7));

var validationdata_mar21= trainingdata_mar21.filter(ee.Filter.gt("random",0.7));

//identify the bands you will be using in the classifier)
var bands = ["b1","b2","b3","b4"];

// //create the classifier
var classifier_mar21 = ee.Classifier.smileRandomForest(500)
    .train({
      features:trainingdata_input_mar21,
      classProperty: 'class',
      inputProperties: bands,
    });    


// // // ////////////////////////////////////////////////////////////////////////////////////
// //Accuracy metrics on the training data
// // Get information about the trained classifier.
print('Results of trained classifier', classifier_mar21.explain());

// // Get a confusion matrix and overall accuracy for the training sample.
var trainAccuracy = classifier_mar21.confusionMatrix();
print('Training error matrix mar21', trainAccuracy);
print('Training overall accuracy mar21', trainAccuracy.accuracy());

// // // //////////////////////////////////////////////////////////////////////////////////////
// //Accuracy on the testing data
// Get a confusion matrix and overall accuracy for the validation sample.
var validationSample_mar21 = validationdata_mar21.classify(classifier_mar21);
var validationAccuracy_mar21 = validationSample_mar21.errorMatrix('class','classification');
print('Validation error matrix mar21', validationAccuracy_mar21);
print('Validation accuracy mar21', validationAccuracy_mar21.accuracy());

// // // ///////////////////////////////////////////////////////////////////////////////
// //other accuracy metrics
var CAtest_validation = validationAccuracy_mar21 .consumersAccuracy();
var Kappatest_validation = validationAccuracy_mar21 .kappa(); 
var PAtest_validation = validationAccuracy_mar21 .producersAccuracy();

print(CAtest_validation,'Consumers Accuracy validation');
print(Kappatest_validation,'Kappa test validation');
print( PAtest_validation ,'Producers Accuracy test validation');

// /////////////////////////////////////////////////////////////////////
//classify the images
var classed_mil_mar21 = Mill_mar_2009.classify(classifier_mar21)


var class_visparams = {bands: ["classification"],
  min:0, max:1,
palette: ['green', 'white']};

print(classed_mil_mar21)

Map.addLayer(classed_mil_mar21.clip(Mill_outline), class_visparams, "classed_mar21")


//Add classification bands to original images

var class_mil_mar21 = classed_mil_mar21.select('classification')
var mill_classed_img_mar21 = Mill_mar_2009.addBands(class_mil_mar21)
print(mill_classed_img_mar21)

//creat mask in classification band
var mask_mar21 = class_mil_mar21.eq(0); // 
var final_mask_mar21 = mill_classed_img_mar21.updateMask(mask_mar21); 

Map.addLayer(final_mask_mar21.clip(Mill_outline), viz_islands, "final_mar21_2021")

//when you export
//use "final_mask_mar21"

//Add and calculate the NDVI of the image as a band
// Compute the Normalized Difference Vegetation Index (NDVI).
var nir_mar21 = final_mask_mar21.select('b4');
var red_mar21 = final_mask_mar21.select('b3');
var ndvi_mar21 = nir_mar21.subtract(red_mar21).divide(nir_mar21.add(red_mar21)).rename('NDVI');

//Add bands

var final_mask_NDVI_mar21 = final_mask_mar21. addBands(ndvi_mar21)


print(final_mask_NDVI_mar21, "final_mask_mar21")


var ndviVis = {
  min: -1.0,
  max: 1.0,
  palette: [
    'FFFFFF', 'CE7E45', 'DF923D', 'F1B555', 'FCD163', '99B718', '74A901',
    '66A000', '529400', '3E8601', '207401', '056201', '004C00', '023B01',
    '012E01', '011D01', '011301'
  ],
};

Map.addLayer(final_mask_NDVI_mar21.select('NDVI').clip(Mill_outline), NDVI_Viz, "NDVI mar21")

////////////////////////////////////////////////////////////////////////////////////////////////////

//Cast all bands to the least restrictive type(float)
//Casting float into int loses data

var  final_mask_NDVI_mar21_float= final_mask_NDVI_mar21.toFloat()
print(final_mask_NDVI_mar21_float)

var  final_mask_NDVI_mar09_float= final_mask_NDVI_mar09.toFloat()
print(final_mask_NDVI_mar09_float)

var  final_mask_NDVI_dec15_float= final_mask_NDVI_dec15.toFloat()
print(final_mask_NDVI_dec15_float)

// To Drive
// //Export all the finals to Drive and as an assest
// Export.image.toDrive({
//   image: final_mask_NDVI_mar21_float.clip(Mill_outline),
//   description: 'final_mask_NDVI_mar21_float',
//   folder:"Line_islands",
//   //crs: 'EPSG :3857',
//   scale: 2, 
//   region: Mill_outline,
//   //maxPixels: 1e9,
//   fileFormat: 'GeoTIFF'
// })


// //Export all the finals to Drive and as an assest
// Export.image.toDrive({
//   image: final_mask_NDVI_mar09_float.clip(Mill_outline),
//   description: 'final_mask_NDVI_mar09_float',
//   folder:"Line_islands",
//   //crs: 'EPSG :3857',
//   scale: 2, 
//   region: Mill_outline,
//   //maxPixels: 1e9,
//   fileFormat: 'GeoTIFF'
// })

// //Export all the finals to Drive and as an assest
// Export.image.toDrive({
//   image: final_mask_NDVI_dec15_float.clip(Mill_outline),
//   description: 'final_mask_NDVI_dec15_float',
//   folder:"Line_islands",
//   //crs: 'EPSG :3857',
//   scale: 2, 
//   region: Mill_outline,
//   //maxPixels: 1e9,
//   fileFormat: 'GeoTIFF'
// })


// //To asset

// // // Set the export "scale" and "crs" parameters.
// Export.image.toAsset({
//   image: final_mask_NDVI_mar21_float,
//   description: 'final_mask_NDVI_mar21_float',
//   assetId: 'LineIslands/Mill_final_mask_NDVI_mar21_float',  // <> modify these
//   region: Mill_outline,
//   scale: 2,
// });


// // // Set the export "scale" and "crs" parameters.
// Export.image.toAsset({
//   image: final_mask_NDVI_mar09_float,
//   description: 'final_mask_NDVI_mar09_float',
//   assetId: 'LineIslands/Mill_final_mask_NDVI_mar09_float',  // <> modify these
//   region: Mill_outline,
//   scale: 2,
// });

// // // Set the export "scale" and "crs" parameters.
// Export.image.toAsset({
//   image: final_mask_NDVI_dec15_float,
//   description: 'final_mask_NDVI_dec15_float',
//   assetId: 'LineIslands/Mill_final_mask_NDVI_dec15_float',  // <> modify these
//   region: Mill_outline,
//   scale: 2,
// });

















